diff a/src/core/md_spatial_hash.c b/src/core/md_spatial_hash.c	(rejected hunks)
@@ -1757,7 +1757,25 @@
          query_batch(spatial_hash, pos, count, radius, iter, user_param);
      }
  }
  
++<<<<<<< HEAD
++=======
+ void md_spatial_hash_query_n2_batch(const md_spatial_hash_t* spatial_hash, float radius, md_spatial_hash_n2_batch_iter_fn iter, void* user_param) {
+     ASSERT(iter);
+ 
+     if (!validate_spatial_hash(spatial_hash)) {
+         return;
+     }
+ 
+     // This is for non periodic lookup
+     if (md_unitcell_flags(&spatial_hash->unit_cell) & MD_UNITCELL_PBC_ALL) {
+         query_n2_periodic_batch(spatial_hash, radius, iter, user_param);
+     } else {
+         query_n2_batch(spatial_hash, radius, iter, user_param);
+     }
+ }
+ 
++>>>>>>> 10c9697 (unit_cell -> unitcell and moved unitcell functionality into types.h from util)
  static inline bool idx_fn(const md_spatial_hash_elem_t* elem_arr, int mask, void* user_param) {
      md_bitfield_t* bf = (md_bitfield_t*)user_param;
      while (mask) {
